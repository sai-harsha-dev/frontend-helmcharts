pipeline{
    parameters {
        string defaultValue: 'localhost:8081/frontend', name: 'IMAGE'
    }

    agent any

    stages{
     
        stage("Delete remote master branch"){
            steps{
                sh 'git branch -r'
                sh 'git branch -a'}
                }
            
        stage ("Add Image URI"){
            steps{
                sh 'sed -i \'s/image:*/image: vnsharsha7999\\/frontend:v1/\' frontend-helm-chart/values.yaml'
            }
        }

        stage ("Git commit and push"){
            steps{
                sh 'git add .'
                sh 'git commit -m "updated image to ${IMAGE}"'
                sh 'git push origin master'
            }
        }
    }
}
